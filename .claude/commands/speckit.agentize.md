---
description: Convert a SpecKit context pack into an agent-ready bundle with chunks and role instructions.
---

## User Input

```text
$ARGUMENTS
```

You **MUST** consider the user input before proceeding (if not empty).

User input may optionally include:
- Which agent roles to emphasise (planner, implementer, reviewer, etc.).

## Outline

1. **Load context pack**
   - Assume `.specify/scripts/bash/build-context-pack.sh --json` has produced:
     - `.speckit/context/context.json` (Context Pack metadata and file list).
   - Read `context.json` and parse according to the Context Pack model:
     - `projectName`, `featureId`, `files[]` (with `path`, `role`, `title`).

2. **Design chunking strategy**
   - For each file in `files[]`, decide how to split content into chunks targeting ~1–2k tokens each.
   - Label each chunk with:
     - `chunkId`, `role`, `sourcePath`, `title`, and `order` within the source file.

3. **Generate agent instructions**
   - Create role-specific instruction documents for common agent roles, for example:
     - `planner` – how to plan from specs/plans/tasks.
     - `implementer` – how to implement tasks from design docs.
     - `reviewer` – how to review specs/plans/tasks and health reports.
   - Instructions should reference the chunk roles (`spec`, `plan`, `tasks`, `architecture`, `decision`, etc.).

4. **Write bundle to disk**
   - Write:
     - `.speckit/agent/config.json` with:
       - `projectName`, `featureId`, `version`, `chunksPath`, `instructionsPath`.
     - `.speckit/agent/chunks/*.md` – the chunked markdown files.
     - `.speckit/agent/instructions/*.md` – per-role instruction files.

5. **Report**
   - Summarise:
     - Number of chunks generated by role.
     - Available instruction files.

## Agent Bundle Structure (Guideline)

Follow the **Agent Bundle** data model in `specs/006-ai-extensions/data-model.md` where possible.

The goal is to make it easy for external tools or multi-agent systems to:
- Discover which chunks represent which design artifacts.
- Route queries to appropriate roles.
- Reuse the bundle across multiple runs without hand-editing.
